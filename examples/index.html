<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Samrakshaka Example</title>
  <style>
    #shield-message { display: block; text-align: center; padding: 20px; z-index: 1200; }
    #content { display: none; }
    .hamburger { cursor: pointer; font-size: 24px; z-index: 1300; position: relative; }
    .mobile-menu-container { display: none; }
    .mobile-menu-container.active { display: block; }
    .mobile-menu-overlay.active { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 1100; }
  </style>
</head>
<body>
  <samrakshaka mode="strict" challenge="both" protected-id="content"></samrakshaka>
  <div id="shield-message">Verifying access with Samrakshaka, your guardian against unauthorized bots...</div>
  <div id="content">
    <header>
      <div class="hamburger">☰</div>
    </header>
    <div class="mobile-menu-container">
      <div class="mobile-menu-close">✕</div>
      <nav>Menu Items</nav>
    </div>
    <div class="mobile-menu-overlay"></div>
    <main>Content here</main>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.1.6/purify.min.js"></script>
  <script src="../lib/samrakshaka.js"></script>
  <script>
    function setupMobileMenu() {
      if (window.innerWidth <= 768) {
        const hamburger = document.querySelector('.hamburger');
        const mobileMenu = document.querySelector('.mobile-menu-container');
        const mobileMenuClose = document.querySelector('.mobile-menu-close');
        const overlay = document.querySelector('.mobile-menu-overlay') || document.createElement('div');
        if (!overlay.classList.contains('mobile-menu-overlay')) {
          overlay.className = 'mobile-menu-overlay';
          document.body.appendChild(overlay);
        }
        if (hamburger) {
          hamburger.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            mobileMenu.classList.toggle('active');
            overlay.classList.toggle('active');
            document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
          });
        }
        if (mobileMenuClose) {
          mobileMenuClose.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
          });
        }
        if (overlay) {
          overlay.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
          });
        }
      }
    }
    document.addEventListener('DOMContentLoaded', setupMobileMenu);
    document.addEventListener('samrakshakaVerified', () => {
      if (window.innerWidth <= 768) setupMobileMenu();
    });
  </script>
</body>
</html>
